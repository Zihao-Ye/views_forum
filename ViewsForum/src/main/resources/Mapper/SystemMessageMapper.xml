<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.viewsforum.viewsforum.Dao.SystemMessageDao">
    <!-- 添加系统消息-->
    <insert id="addNewSystemMessage" parameterType="SystemMessage">
        insert into system_message(system_messageid, message_content, userid, message_type,  message_time)
        values (#{systemMessageID},#{messageContent},#{userID},#{messageType},#{messageTime})
    </insert>
    <!-- 已读消息-->
    <update id="readOneSysTemMessage" parameterType="Integer">
        update system_message
        set is_read=1
        where system_messageid=#{systemMessageID}
    </update>
    <!-- 一键已读（类别）-->
    <update id="readAllSystemMessageByType" parameterType="SystemMessage">
        update system_message
        set is_read=1
        where userid=#{userID} and message_type=#{messageType}
    </update>
    <!-- 获取未读系统消息（分类）-->
    <select id="getSystemMessageByUserIDAndMessageType" parameterType="SystemMessage" resultType="SystemMessage">
        select *
        from system_message
        where userid=#{userID} and message_type=#{messageType} and is_read=0
        order by message_time
    </select>
    <!-- 获取所有未读系统消息-->
    <select id="getAllSystemMessageByUserID" parameterType="Integer" resultType="SystemMessage">
        select *
        from system_message
        where userid=#{useID} and is_read=0
        order by message_time
    </select>
    <!-- 一键已读（所有）-->
    <update id="readAllSystemMessage" parameterType="Integer">
        update system_message
        set is_read=1
        where userid=#{userID}
    </update>
</mapper>